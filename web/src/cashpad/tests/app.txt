Let's first create an instance at the top level:

    >>> from cashpad.app import App
    >>> root = getRootFolder()
    >>> app = root['app'] = App()

    >>> # Ugly import
    >>> from grokcore.rest.ftests.test_grok_functional import http_call

Create a user::

    >>> response = http_call('PUT', 'http://localhost/++rest++api/app/user/123')
    >>> response.getStatus()
    201

User already exists::

    >>> response = http_call('PUT', 'http://localhost/++rest++api/app/user/123')
    >>> response.getStatus()
    204

Create an order::

    >>> import simplejson
    >>> order = {
    ...     'created_on': 1298133944,
    ...     'total_price': 19.75,
    ...     'item_list': [
    ...         {
    ...             'product_id': 1,
    ...             'product_name': 'cola',
    ...             'amount': 2,
    ...             'unit_price': 2.10,
    ...         },
    ...         {
    ...             'product_id': 2,
    ...             'product_name': 'pizza calzone',
    ...             'amount': 1,
    ...             'unit_price': 15.55,
    ...         }
    ...     ]
    ... } 
    
    >>> response = http_call('POST', 'http://localhost/++rest++api/app/user/123/order/', data=simplejson.dumps(order))
    >>> response.getStatus()
    201

    >>> first_order = response.getHeader('Location')
    >>> print first_order
    http://localhost/++rest++api/app/user/123/order/1

    # >>> response = http_call('GET', first_order)
    # >>> response.getBody()
